# ✅ תיקון שגיאת התחברות - Supabase CSP

**בעיה:** שגיאות CSP חוסמות את Supabase  
**סטטוס:** תוקן - דורש הפעלה מחדש של השרת

---

## מה תוקן

עדכנתי את `new-app/src/hooks.server.js` עם ה-CSP הנכון:

```javascript
"connect-src 'self' http://localhost:1337 https://osoqfadqohqcauawzmmq.supabase.co https://accounts.google.com https://api.openai.com"
```

---

## שלבים להפעלה

### 1. עצור את שרת הפיתוח
לחץ **Ctrl+C** בטרמינל שבו רץ `npm run dev`

### 2. הפעל מחדש
```bash
cd new-app
npm run dev
```

### 3. רענן את הדפדפן
לחץ **Ctrl + Shift + R** (או **Cmd + Shift + R** במק)

---

## אם עדיין לא עובד

### נקה את המטמון של הדפדפן

**Chrome/Edge:**
1. לחץ **F12** לפתיחת DevTools
2. לחץ לחיצה ימנית על כפתור הרענון
3. בחר **"Empty Cache and Hard Reload"**

**או:**
1. לחץ **Ctrl + Shift + Delete**
2. בחר "Cached images and files"
3. לחץ "Clear data"

### השתמש בחלון פרטי
פתח חלון גלישה פרטית/אינקוגניטו כדי לבדוק ללא מטמון

---

## בדיקה שה-CSP תקין

1. פתח DevTools (F12)
2. עבור ללשונית **Network**
3. רענן את הדף
4. לחץ על הבקשה הראשונה (בדרך כלל מסמך ה-HTML)
5. חפש **Response Headers**
6. מצא את `Content-Security-Policy`
7. ודא שהוא כולל: `https://osoqfadqohqcauawzmmq.supabase.co`

---

## מה אמור לעבוד עכשיו

✅ התחברות עם Supabase  
✅ שחזור סיסמה  
✅ Google OAuth  
✅ כל קריאות ה-API של Supabase

---

## אם עדיין יש בעיה

אם אחרי הפעלה מחדש של השרת ורענון הדפדפן עדיין יש שגיאה:

1. **בדוק שהשרת אכן הופעל מחדש** - צריך לראות הודעה חדשה בטרמינל
2. **נסה חלון פרטי** - זה יעזור לזהות אם זה בעיית מטמון
3. **בדוק את הקונסול** - האם השגיאה עדיין אותה שגיאת CSP?

---

**חשוב:** השרת חייב להיות מופעל מחדש כדי שהשינויים ייכנסו לתוקף!

*עודכן: 1 בדצמבר 2025*
