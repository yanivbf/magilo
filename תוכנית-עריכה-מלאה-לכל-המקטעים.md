# 🎨 תוכנית עריכה מלאה לכל המקטעים

## מטרה
יצירת מערכת עריכה אינטואיטיבית שמאפשרת לערוך **הכל** בדף ישירות, ללא מעבר לדף ניהול.

## עקרונות עיצוב

### 1. עריכה ישירה (WYSIWYG)
- לחיצה על אלמנט = עריכה
- שמירה אוטומטית
- ללא פופאפים מיותרים

### 2. אינדיקציה ויזואלית
- Hover = מסגרת + אייקון עריכה
- Focus = מסגרת חזקה
- Saving = אנימציית שמירה

### 3. סוגי עריכה
- **טקסט** → contenteditable
- **תמונות** → לחיצה = file picker
- **רשימות** → הוספה/מחיקה/סידור מחדש
- **מקטעים** → הצגה/הסתרה/סידור מחדש

## מה ניתן לעריכה

### ✅ Hero Section
- [x] כותרת (title)
- [x] תיאור (description)
- [ ] תמונת רקע
- [ ] סרטון YouTube (URL)
- [ ] כפתור CTA (טקסט + קישור)

### ✅ פרטי קשר
- [x] טלפון
- [x] אימייל
- [x] כתובת

### 🔄 Gallery Section (גלריה רגילה)
- [ ] כותרת המקטע
- [ ] תת-כותרת
- [ ] תמונות:
  - לחיצה על תמונה = החלפה
  - כפתור + = הוספת תמונה
  - כפתור X = מחיקת תמונה
  - גרירה = סידור מחדש

### 🔄 Products Gallery (מוצרים)
- [ ] כותרת המקטע
- [ ] תת-כותרת
- [ ] מוצרים:
  - לחיצה על תמונה = החלפה
  - לחיצה על שם = עריכת שם
  - לחיצה על מחיר = עריכת מחיר
  - לחיצה על תיאור = עריכת תיאור
  - כפתור + = הוספת מוצר
  - כפתור X = מחיקת מוצר

### 🔄 Testimonials Section (המלצות)
- [ ] כותרת המקטע
- [ ] המלצות:
  - לחיצה על טקסט = עריכה
  - לחיצה על שם = עריכת שם
  - לחיצה על תפקיד = עריכת תפקיד
  - לחיצה על תמונה = החלפה
  - כפתור + = הוספת המלצה
  - כפתור X = מחיקת המלצה

### 🔄 FAQ Section (שאלות ותשובות)
- [ ] כותרת המקטע
- [ ] שאלות ותשובות:
  - לחיצה על שאלה = עריכה
  - לחיצה על תשובה = עריכה
  - כפתור + = הוספת שאלה
  - כפתור X = מחיקת שאלה
  - גרירה = סידור מחדש

### 🔄 About Section (אודות)
- [ ] כותרת
- [ ] תוכן
- [ ] תכונות (features):
  - לחיצה על אייקון = שינוי
  - לחיצה על כותרת = עריכה
  - לחיצה על טקסט = עריכה
  - כפתור + = הוספת תכונה
  - כפתור X = מחיקת תכונה

## ארכיטקטורה טכנית

### 1. קומפוננט Wrapper: `EditableSection.svelte`
```svelte
<EditableSection 
  type="gallery" 
  data={section.data}
  pageId={pageId}
  sectionId={section.id}
>
  <GallerySection {data} />
</EditableSection>
```

**תפקיד:**
- מוסיף overlay עם כפתורי עריכה
- מטפל בשמירה
- מציג אנימציות

### 2. קומפוננט עריכה: `EditableText.svelte`
```svelte
<EditableText 
  value={text}
  onSave={(newValue) => save('field', newValue)}
/>
```

**תפקיד:**
- contenteditable
- שמירה אוטומטית onBlur
- ולידציה

### 3. קומפוננט תמונה: `EditableImage.svelte`
```svelte
<EditableImage 
  src={image}
  onUpload={(file) => uploadImage(file)}
/>
```

**תפקיד:**
- overlay עם אייקון מצלמה
- file picker
- העלאה ל-Strapi
- תצוגה מקדימה

### 4. קומפוננט רשימה: `EditableList.svelte`
```svelte
<EditableList 
  items={items}
  onAdd={() => addItem()}
  onDelete={(id) => deleteItem(id)}
  onReorder={(newOrder) => reorder(newOrder)}
/>
```

**תפקיד:**
- כפתורי +/-
- drag & drop
- שמירה אוטומטית

## API Endpoints

### 1. עדכון מקטע
```
PUT /api/sections/[sectionId]
Body: { data: {...} }
```

### 2. העלאת תמונה למקטע
```
POST /api/sections/[sectionId]/upload-image
Body: FormData { image, field }
```

### 3. הוספת פריט לרשימה
```
POST /api/sections/[sectionId]/items
Body: { type, data }
```

### 4. מחיקת פריט מרשימה
```
DELETE /api/sections/[sectionId]/items/[itemId]
```

### 5. סידור מחדש
```
PUT /api/sections/[sectionId]/reorder
Body: { items: [...] }
```

## תהליך יישום

### שלב 1: תשתית בסיסית ✅
- [x] EditableText לכותרות ותיאורים
- [x] שמירה אוטומטית
- [x] הודעות משוב

### שלב 2: תמונות 🔄
- [ ] EditableImage component
- [ ] overlay עם אייקון
- [ ] העלאה ל-Strapi
- [ ] עדכון בזמן אמת

### שלב 3: גלריה רגילה
- [ ] EditableGallery component
- [ ] הוספת תמונות
- [ ] מחיקת תמונות
- [ ] סידור מחדש (drag & drop)

### שלב 4: מוצרים
- [ ] EditableProduct component
- [ ] עריכת כל השדות
- [ ] הוספת מוצר
- [ ] מחיקת מוצר

### שלב 5: המלצות
- [ ] EditableTestimonial component
- [ ] עריכת טקסט
- [ ] החלפת תמונה
- [ ] הוספה/מחיקה

### שלב 6: FAQ
- [ ] EditableFAQ component
- [ ] עריכת שאלות ותשובות
- [ ] הוספה/מחיקה
- [ ] סידור מחדש

### שלב 7: About
- [ ] EditableAbout component
- [ ] עריכת תכונות
- [ ] הוספה/מחיקה

### שלב 8: ניהול מקטעים
- [ ] הצגה/הסתרה של מקטעים
- [ ] סידור מקטעים מחדש
- [ ] הוספת מקטע חדש

## UX/UI

### אינדיקטור מצב עריכה
```
┌─────────────────────────────────────────┐
│ ✏️ מצב עריכה - לחץ על כל אלמנט לעריכה │
└─────────────────────────────────────────┘
```

### Hover על אלמנט
```
┌─────────────────────────┐
│  [✏️]  טקסט לעריכה     │ ← מסגרת מקווקוות
└─────────────────────────┘
```

### Hover על תמונה
```
┌─────────────────────────┐
│                         │
│      📸 החלף תמונה      │ ← overlay שקוף
│                         │
└─────────────────────────┘
```

### כפתורי פעולה על רשימה
```
┌─────────────────────────┐
│  פריט 1        [⋮] [X]  │ ← גרירה, מחיקה
│  פריט 2        [⋮] [X]  │
│  [+ הוסף פריט]          │
└─────────────────────────┘
```

## סטיילינג

### צבעים
- **Hover:** `rgba(102, 126, 234, 0.1)` (סגול בהיר)
- **Focus:** `rgba(102, 126, 234, 0.3)` (סגול בינוני)
- **Border:** `2px dashed rgba(102, 126, 234, 0.5)`
- **Success:** `#22c55e` (ירוק)
- **Error:** `#ef4444` (אדום)

### אנימציות
- **Fade in:** 0.3s ease-out
- **Slide up:** 0.3s ease-out
- **Pulse:** 2s infinite (לאייקונים)

## טיפול בשגיאות

### שגיאת רשת
```
❌ שגיאת רשת - נסה שוב
```

### שגיאת שרת
```
❌ שגיאה בשמירה - פנה לתמיכה
```

### שגיאת ולידציה
```
⚠️ השדה לא יכול להיות ריק
```

## ביצועים

### אופטימיזציות
- Debounce על שמירה (500ms)
- Lazy loading לתמונות
- Virtual scrolling לרשימות ארוכות
- Optimistic updates (עדכון מיידי בUI)

---

**סטטוס:** 📋 תכנון  
**הערכת זמן:** 4-6 שעות עבודה  
**קרדיטים נותרים:** ~550
