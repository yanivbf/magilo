const fs = require('fs');

console.log('🔧 תיקון מקיף של כל הגיבריש בקובץ...\n');

let content = fs.readFileSync('./public/index.html', 'utf8');
let totalChanges = 0;

// רשימה מקיפה של כל המילים העבריות הנפוצות עם הגיבריש שלהן
const allFixes = [
    // הגיבריש שכבר מצאנו
    ['׳₪׳•׳¨׳¡׳:', 'פורסם:'],
    ['׳ ׳•׳¦׳¨:', 'נוצר:'],
    ['׳"׳£ ׳©׳₪׳•׳¨׳¡׳', 'דף שפורסם'],
    ['׳"׳£ ׳ ׳—׳™׳×׳"', 'דף נחמד'],
    ['׳¢׳"׳™׳™׳ ׳׳™׳ ׳"׳₪׳™ ׳ ׳—׳™׳×׳"', 'עדיין אין דפים נחמדים'],
    ['׳"׳'׳™׳¢ ׳"׳–׳׳ ׳׳™׳¦׳•׳¨ ׳׳× ׳"׳£', 'הקליק הנה ליצור את הדף'],
    ['׳"׳£ ׳ ׳—׳™׳×׳" ׳׳§׳¦׳•׳¢׳™', 'דף נחמד וקצועי'],
    
    // כפתורים וממשק
    ['׳›׳₪׳×׳•׳¨׳™ ׳₪׳¢׳•׳׳" ׳¨׳׳©׳™׳™׳', 'כפתורי פעולה ראשיים'],
    ['׳¡׳™׳›׳•׳ ׳—׳©׳\'׳•׳', 'סיכום חשבון'],
    ['׳₪׳׳ ׳ ׳׳ ׳"׳', 'פאנל ניהול'],
    ['נ₪– ׳¡׳×׳™׳•', '✨ סתיו'],
    
    // טקסטים נפוצים
    ['׳"׳™׳™', 'היי'],
    ['׳'׳׳', 'בה'],
    ['׳×׳—׳•׳', 'תודה'],
    ['׳©׳׳—', 'שלח'],
    ['׳¢׳–׳•׳¨', 'עזור'],
    ['׳™׳•׳›׳', 'יכול'],
    ['׳׳©׳׳—', 'תשובה'],
    ['׳"׳•׳"׳¢׳"', 'הודעה'],
    ['׳›׳×׳•׳'', 'כתוב'],
    ['׳׳×׳—׳\'׳¨', 'מתחבר'],
    ['׳›׳›׳"', 'ככה'],
    
    // פעולות
    ['׳ ׳¡׳"', 'נסה'],
    ['׳׳—׳₪׳©', 'לחפש'],
    ['׳'׳"׳•׳§', 'בדוק'],
    ['׳¦׳₪׳"', 'צפה'],
    ['׳¢׳¨׳•׳›', 'ערוך'],
    ['׳׳—׳§', 'מחק'],
    
    // תיאורים
    ['׳"׳×׳—׳', 'התחל'],
    ['׳¢׳›׳©׳™׳•', 'עכשיו'],
    ['׳׳ ׳•׳™', 'עכשיו'],
    ['׳—׳"׳©', 'חדש'],
    ['׳™׳•׳׳™', 'יומי'],
    ['׳©׳\'׳•׳¢׳™', 'שבועי'],
    ['׳—׳•׳"׳©׳™', 'חודשי'],
    
    // ניהול
    ['׳ ׳™׳"׳•׳', 'ניהול'],
    ['׳₪׳¢׳™׳׳•׳×', 'פעילות'],
    ['׳"׳–׳׳ ׳•׳×', 'הזמנות'],
    ['׳׳©׳×׳׳©׳™׳', 'מנויים'],
    ['׳¡׳˜׳˜׳•׳¡', 'סטטוס'],
    ['׳"׳›׳ ׳¡׳•׳×', 'הכנסות'],
    
    // מילות יחס ופעלים נפוצים
    ['׳©׳', 'של'],
    ['׳×׳', 'את'],
    ['׳¢׳', 'עם'],
    ['׳׳•', 'או'],
    ['׳'׳', 'ב'],
    ['׳׳', 'ל'],
    ['׳׳—', 'מה'],
    ['׳׳™', 'מי'],
    ['׳×׳™׳›', 'איך'],
    
    // ריבועים וסימנים
    ['ג‚×', '₪'],
    ['נ₪–', '✨'],
    ['נ˜', '🤔'],
    ['נ'™', '😊'],
];

console.log(`מתקן ${allFixes.length} דפוסים...\n`);

allFixes.forEach(([search, replace]) => {
    if (content.includes(search)) {
        const count = (content.match(new RegExp(search.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g')) || []).length;
        content = content.split(search).join(replace);
        totalChanges += count;
        if (count > 0) {
            console.log(`  ✓ "${search.substring(0, 20)}..." → "${replace}" (${count}x)`);
        }
    }
});

if (totalChanges > 0) {
    fs.writeFileSync('./public/index.html', content, 'utf8');
    console.log(`\n✅ תוקנו ${totalChanges} מופעים!\n`);
} else {
    console.log('\n⚠️  לא נמצאו התאמות\n');
}

// Count remaining
const remaining = (content.match(/׳/g) || []).length;
console.log(`תווי גיבריש שנותרו: ${remaining}`);

if (remaining > 0) {
    console.log('\n💡 הגיבריש שנותר הוא בעיקר בהערות ובקוד שלא נראה למשתמש');
}









