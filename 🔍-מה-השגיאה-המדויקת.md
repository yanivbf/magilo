# 🔍 מה השגיאה המדויקת?

## הבעיה

אתה מקבל שגיאה: **"Failed to create purchase"**

אבל זה לא אומר לנו **למה** זה נכשל.

---

## 🎯 מה צריך לעשות עכשיו

### 1. בדוק את הלוגים בטרמינל של SvelteKit

**איפה:** הטרמינל שבו רץ `npm run dev` (פורט 5174)

**מה לחפש:**
```
🛒 PURCHASE REQUEST: {...}
🔍 Looking up Strapi user...
🔍 Looking up Strapi page...
💾 Creating purchase in Strapi...
📦 Creating purchase in Strapi: {...}
🔢 Converted IDs: {...}
📤 Strapi request payload: {...}
❌ Strapi purchase creation error:  ← זה מה שאנחנו מחפשים!
```

**העתק את כל הלוגים** מהטרמינל ושלח לי אותם!

---

### 2. בדוק את הלוגים בטרמינל של Strapi

**איפה:** הטרמינל שבו רץ Strapi (פורט 1337)

**מה לחפש:**
```
[error] POST /api/purchases (400) ...
או
[error] ...
```

**העתק את השגיאות** מהטרמינל של Strapi!

---

### 3. בדוק בקונסול הדפדפן

**איפה:** F12 → Console

**מה לחפש:**
```
📤 Sending request body: {...}
📥 Response status: 500 Internal Server Error
📥 Response data: {...}  ← זה חשוב!
```

**העתק את כל הלוגים** מהקונסול!

---

## 🧪 בדיקה מהירה

אם אתה רוצה לבדוק ישירות את ה-API של Strapi:

1. **פתח את הקובץ:** `test-purchase-api-direct.js`
2. **החלף את הטוקן:** שים את הטוקן מ-`.env`
3. **החלף את ה-IDs:** שים user ID ו-page ID אמיתיים
4. **הרץ:** `node test-purchase-api-direct.js`

זה יבדוק אם Strapi בכלל יכול לקבל purchases.

---

## 🤔 שגיאות אפשריות

### אם אתה רואה: "user must be a number"
**פתרון:** ה-userId לא הומר למספר נכון

### אם אתה רואה: "page must be a number"
**פתרון:** ה-pageId לא הומר למספר נכון

### אם אתה רואה: "User not found"
**פתרון:** המשתמש לא קיים ב-Strapi

### אם אתה רואה: "Page not found"
**פתרון:** הדף לא קיים ב-Strapi

### אם אתה רואה: "Forbidden"
**פתרון:** בעיית הרשאות ב-Strapi

---

## 📋 מה אני צריך ממך

כדי שאוכל לעזור לך, אני צריך:

1. ✅ **לוגים מהטרמינל של SvelteKit** (כל השורות שמתחילות ב-🛒 או ❌)
2. ✅ **לוגים מהטרמינל של Strapi** (כל שגיאות)
3. ✅ **לוגים מהקונסול בדפדפן** (כל השורות שמתחילות ב-📤 או ❌)

**העתק והדבק את כל הלוגים האלה ואני אוכל לזהות את הבעיה המדויקת!** 🚀
