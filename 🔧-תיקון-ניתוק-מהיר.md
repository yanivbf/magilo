# ğŸ”§ ×ª×™×§×•×Ÿ × ×™×ª×•×§ ××”×™×¨ - ××“×¨×™×š ×¦×¢×“ ××—×¨ ×¦×¢×“

## ×”×‘×¢×™×”:
××ª×” ××ª×—×‘×¨ ×¢× Google, ××‘×œ ×›×©××¨×¢× × ×™× ××ª ×”×“×£ - ×—×•×–×¨ ×œ×“×£ ×”×ª×—×‘×¨×•×ª.

---

## ğŸ” ×‘×“×™×§×” ××”×™×¨×”:

### ×©×œ×‘ 1: ×¤×ª×— ××ª ×“×£ ×”×‘×“×™×§×”

×¤×ª×— ×‘×“×¤×“×¤×Ÿ:
```
file:///[PATH_TO_PROJECT]/ğŸ”-×‘×“×™×§×ª-cookie-×•-session.html
```

××• ×¤×©×•×˜ ×¤×ª×— ××ª ×”×§×•×‘×¥ `ğŸ”-×‘×“×™×§×ª-cookie-×•-session.html` ×‘×“×¤×“×¤×Ÿ.

### ×©×œ×‘ 2: ×œ×—×¥ "×‘×“×•×§ Cookies"

×××•×¨ ×œ×¨××•×ª:
- âœ… `userId=google_123456789` (××• ××©×”×• ×“×•××”)
- âŒ ×× ××™×Ÿ cookie - ×–×• ×”×‘×¢×™×”!

### ×©×œ×‘ 3: ×œ×—×¥ "×‘×“×•×§ Session"

×××•×¨ ×œ×§×‘×œ:
```json
{
  "success": true,
  "user": {
    "id": "...",
    "name": "...",
    "email": "..."
  }
}
```

---

## ğŸ› ×× ××™×Ÿ Cookie:

### ×‘×¢×™×”: Cookie ×œ× × ×©××¨ ××—×¨×™ ×”×ª×—×‘×¨×•×ª

**×¤×ª×¨×•×Ÿ:**

1. **×¤×ª×— Console (F12)** ×‘×“×£ ×”×”×ª×—×‘×¨×•×ª
2. **×”×ª×—×‘×¨ ×¢× Google**
3. **×—×¤×© ×‘Console:**
   ```
   âœ… Cookie set for user: google_123456789
   ```

×× ××ª×” ×¨×•××” ××ª ×–×” ××‘×œ ×”-cookie ×œ× × ×©××¨, ×–×” ××•××¨ ×©×™×© ×‘×¢×™×” ×¢× ×”×’×“×¨×•×ª ×”-cookie.

---

## ğŸ”§ ×ª×™×§×•×Ÿ 1: ×‘×“×•×§ ×”×’×“×¨×•×ª Cookie

×¤×ª×— ××ª `new-app/src/routes/api/auth/google/+server.js` ×•×‘×“×•×§ ×©×™×©:

```javascript
cookies.set('userId', user.userId, {
    path: '/',
    httpOnly: false, // ×—×©×•×‘! ×¦×¨×™×š ×œ×”×™×•×ª false
    secure: false,   // ×—×©×•×‘! ×¦×¨×™×š ×œ×”×™×•×ª false ×‘-localhost
    sameSite: 'lax',
    maxAge: 60 * 60 * 24 * 30 // 30 days
});
```

---

## ğŸ”§ ×ª×™×§×•×Ÿ 2: ×‘×“×•×§ ×©×”-API ××—×–×™×¨ × ×›×•×Ÿ

×¤×ª×— Console ×•×¨×•×¥:

```javascript
fetch('/api/user/google_111335112056327425674')
  .then(r => r.json())
  .then(console.log)
```

(×”×—×œ×£ ××ª ×”-ID ×‘-userId ×©×œ×š)

×××•×¨ ×œ×§×‘×œ:
```json
{
  "success": true,
  "user": { ... }
}
```

×× ××§×‘×œ 404 ××• 500 - ×–×• ×”×‘×¢×™×”!

---

## ğŸ”§ ×ª×™×§×•×Ÿ 3: ×‘×“×•×§ ×©-Strapi ×¨×¥

×¤×ª×—:
```
http://localhost:1337/admin
```

×× ×œ× × ×¤×ª×— - Strapi ×œ× ×¨×¥!

**×”×¤×¢×œ:**
```cmd
cd strapi-backend
npm run develop
```

---

## ğŸ”§ ×ª×™×§×•×Ÿ 4: ×‘×“×•×§ ×©×”××©×ª××© ×§×™×™× ×‘-Strapi

1. **×¤×ª×— Strapi Admin:** `http://localhost:1337/admin`
2. **×œ×š ×œ-Content Manager â†’ Users**
3. **×—×¤×© ××ª ×”××©×ª××© ×©×œ×š**
4. **×‘×“×•×§ ×©×™×© ×œ×• `userId` field ×¢× ×”×¢×¨×š `google_123456789`**

×× ××™×Ÿ - ×–×• ×”×‘×¢×™×”!

---

## ğŸ”§ ×ª×™×§×•×Ÿ 5: × ×§×” Cache ×•-Cookies

×œ×¤×¢××™× ×”×“×¤×“×¤×Ÿ ×©×•××¨ cache ×™×©×Ÿ.

1. **×œ×—×¥ Ctrl+Shift+Delete**
2. **×‘×—×¨ "Cookies and other site data"**
3. **×‘×—×¨ "Cached images and files"**
4. **×œ×—×¥ "Clear data"**
5. **×¡×’×•×¨ ××ª ×”×“×¤×“×¤×Ÿ ×œ×’××¨×™**
6. **×¤×ª×— ××—×“×©**
7. **× ×¡×” ×œ×”×ª×—×‘×¨ ×©×•×‘**

---

## ğŸ”§ ×ª×™×§×•×Ÿ 6: ×‘×“×•×§ Console Errors

×¤×ª×— Console (F12) ×•×‘×“×•×§ ×× ×™×© ×©×’×™××•×ª ××“×•××•×ª.

**×©×’×™××•×ª × ×¤×•×¦×•×ª:**

### ×©×’×™××”: "User not found"
**×¤×ª×¨×•×Ÿ:** ×”××©×ª××© ×œ× ×§×™×™× ×‘-Strapi. ×”×ª×—×‘×¨ ×©×•×‘ ×¢× Google.

### ×©×’×™××”: "Failed to fetch"
**×¤×ª×¨×•×Ÿ:** Strapi ×œ× ×¨×¥. ×”×¤×¢×œ ××•×ª×•.

### ×©×’×™××”: "CORS error"
**×¤×ª×¨×•×Ÿ:** ×‘×“×•×§ ××ª `strapi-backend/config/middlewares.ts`

---

## ğŸ“‹ ×¨×©×™××ª ×‘×“×™×§×” ××”×™×¨×”:

- [ ] Strapi ×¨×¥ ×¢×œ `http://localhost:1337`
- [ ] SvelteKit ×¨×¥ ×¢×œ `http://localhost:5173`
- [ ] Cookie `userId` ×§×™×™× ××—×¨×™ ×”×ª×—×‘×¨×•×ª
- [ ] `/api/user/${userId}` ××—×–×™×¨ ××ª ×”××©×ª××©
- [ ] Console ×œ× ××¨××” ×©×’×™××•×ª
- [ ] ×”××©×ª××© ×§×™×™× ×‘-Strapi ×¢× `userId` field

---

## ğŸš€ ×‘×“×™×§×” ×¡×•×¤×™×ª:

1. **×”×ª×—×‘×¨ ×¢× Google:** `http://localhost:5173/login`
2. **×‘×“×•×§ ×©××ª×” ×‘×“×©×‘×•×¨×“:** `http://localhost:5173/dashboard`
3. **×¨×¢× ×Ÿ ××ª ×”×“×£ (F5)**
4. **×××•×¨ ×œ×”×™×©××¨ ×‘×“×©×‘×•×¨×“!** âœ…

---

## ğŸ†˜ ×× ×›×œ×•× ×œ× ×¢×•×‘×“:

**×”×¤×¢×œ ××—×“×© ×”×›×œ:**

```cmd
# Terminal 1 - Strapi
cd strapi-backend
npm run develop

# Terminal 2 - SvelteKit
cd new-app
npm run dev
```

**× ×§×” ×”×›×œ:**
1. ×¡×’×•×¨ ××ª ×›×œ ×”×“×¤×“×¤× ×™×
2. × ×§×” cookies (Ctrl+Shift+Delete)
3. ×¤×ª×— ×“×¤×“×¤×Ÿ ×—×“×©
4. ×œ×š ×œ-`http://localhost:5173/login`
5. ×”×ª×—×‘×¨ ×¢× Google
6. ×‘×“×•×§ ×‘-Console ×©×™×©: `âœ… Cookie set for user: google_...`
7. ×¨×¢× ×Ÿ ××ª ×”×“×£
8. ×××•×¨ ×œ×”×™×©××¨ ××—×•×‘×¨!

---

**×ª×’×™×“ ×œ×™ ××” ××ª×” ×¨×•××” ×‘-Console ×›×©××ª×” ××¨×¢× ×Ÿ ××ª ×”×“×£!** ğŸ”

