<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¤ ×‘×“×™×§×ª ×§×•×œ×•×ª - Google TTS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .voice-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .voice-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        .playing {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            transform: scale(1.05);
        }
        .voice-card.playing .play-icon {
            display: none;
        }
        .voice-card.playing .stop-icon {
            display: inline;
        }
        .stop-icon {
            display: none;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-8">
    <div class="max-w-4xl w-full bg-white rounded-3xl shadow-2xl p-8">
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">ğŸ¤ ×‘×—×¨ ××ª ×”×§×•×œ ×”××•×©×œ×</h1>
            <p class="text-gray-600">×œ×—×¥ ×¢×œ ×›×¨×˜×™×¡ ×›×“×™ ×œ×©××•×¢ ×“×•×’××”</p>
        </div>

        <!-- Text to speak -->
        <div class="mb-6">
            <label class="block text-gray-700 font-bold mb-2">ğŸ“ ×”×˜×§×¡×˜ ×©×ª×©××¢:</label>
            <input 
                type="text" 
                id="testText" 
                value="×©×œ×•×, ×× ×™ ×¡×ª×™×•. ××™×š ×× ×™ ×™×›×•×œ×” ×œ×¢×–×•×¨ ×œ×š ×”×™×•×?"
                class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none"
            />
        </div>

        <!-- Voice cards grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
            <!-- Wavenet-A (Female) -->
            <div class="voice-card bg-gradient-to-br from-pink-100 to-purple-100 p-6 rounded-xl shadow-lg" 
                 onclick="speakWithVoice('he-IL-Wavenet-A', 'FEMALE', this)">
                <div class="flex items-center justify-between mb-3">
                    <h3 class="text-xl font-bold text-gray-800">ğŸ‘© × ×©×™ A</h3>
                    <span class="text-2xl play-icon">â–¶ï¸</span>
                    <span class="text-2xl stop-icon">â¸ï¸</span>
                </div>
                <p class="text-sm text-gray-600">Wavenet-A (×”×›×™ ×¤×•×¤×•×œ×¨×™) â­</p>
                <div class="mt-3 text-xs text-gray-500">
                    <div>Pitch: -5.0 | Rate: 1.35 | ğŸ”Š Bluetooth</div>
                    <div class="font-bold text-purple-600">âœ… ××•×ª×§×Ÿ ×¢×›×©×™×•</div>
                </div>
            </div>

            <!-- Wavenet-B (Male) -->
            <div class="voice-card bg-gradient-to-br from-blue-100 to-indigo-100 p-6 rounded-xl shadow-lg" 
                 onclick="speakWithVoice('he-IL-Wavenet-B', 'MALE', this)">
                <div class="flex items-center justify-between mb-3">
                    <h3 class="text-xl font-bold text-gray-800">ğŸ‘¨ ×’×‘×¨×™ B</h3>
                    <span class="text-2xl play-icon">â–¶ï¸</span>
                    <span class="text-2xl stop-icon">â¸ï¸</span>
                </div>
                <p class="text-sm text-gray-600">Wavenet-B</p>
                <div class="mt-3 text-xs text-gray-500">
                    <div>Pitch: -5.0 | Rate: 1.35 | ğŸ”Š Bluetooth</div>
                </div>
            </div>

            <!-- Wavenet-C (Female) -->
            <div class="voice-card bg-gradient-to-br from-pink-100 to-red-100 p-6 rounded-xl shadow-lg" 
                 onclick="speakWithVoice('he-IL-Wavenet-C', 'FEMALE', this)">
                <div class="flex items-center justify-between mb-3">
                    <h3 class="text-xl font-bold text-gray-800">ğŸ‘© × ×©×™ C</h3>
                    <span class="text-2xl play-icon">â–¶ï¸</span>
                    <span class="text-2xl stop-icon">â¸ï¸</span>
                </div>
                <p class="text-sm text-gray-600">Wavenet-C (×•×¨×™××¦×™×” 2)</p>
                <div class="mt-3 text-xs text-gray-500">
                    <div>Pitch: -5.0 | Rate: 1.35 | ğŸ”Š Bluetooth</div>
                </div>
            </div>

            <!-- Wavenet-D (Male) -->
            <div class="voice-card bg-gradient-to-br from-blue-100 to-cyan-100 p-6 rounded-xl shadow-lg" 
                 onclick="speakWithVoice('he-IL-Wavenet-D', 'MALE', this)">
                <div class="flex items-center justify-between mb-3">
                    <h3 class="text-xl font-bold text-gray-800">ğŸ‘¨ ×’×‘×¨×™ D</h3>
                    <span class="text-2xl play-icon">â–¶ï¸</span>
                    <span class="text-2xl stop-icon">â¸ï¸</span>
                </div>
                <p class="text-sm text-gray-600">Wavenet-D (×•×¨×™××¦×™×” 2)</p>
                <div class="mt-3 text-xs text-gray-500">
                    <div>Pitch: -5.0 | Rate: 1.35 | ğŸ”Š Bluetooth</div>
                </div>
            </div>
        </div>

        <!-- Settings -->
        <div class="bg-gray-100 p-6 rounded-xl mb-6">
            <h3 class="text-lg font-bold text-gray-800 mb-4">âš™ï¸ ×”×’×“×¨×•×ª ×¨×•×‘×•×˜×™×•×ª</h3>
            
            <div class="mb-4">
                <label class="block text-gray-700 font-bold mb-2">
                    ğŸšï¸ Pitch (×’×•×‘×” ×”×§×•×œ): <span id="pitchValue">-5.0</span>
                </label>
                <input 
                    type="range" 
                    id="pitchSlider" 
                    min="-10" 
                    max="0" 
                    step="0.5" 
                    value="-5"
                    class="w-full"
                    oninput="document.getElementById('pitchValue').textContent = this.value"
                />
                <div class="flex justify-between text-xs text-gray-500 mt-1">
                    <span>×¨×•×‘×•×˜×™ ×××•×“ (-10)</span>
                    <span>×˜×‘×¢×™ (0)</span>
                </div>
            </div>

            <div class="mb-4">
                <label class="block text-gray-700 font-bold mb-2">
                    âš¡ Speaking Rate (××”×™×¨×•×ª): <span id="rateValue">1.35</span>
                </label>
                <input 
                    type="range" 
                    id="rateSlider" 
                    min="0.5" 
                    max="2.0" 
                    step="0.05" 
                    value="1.35"
                    class="w-full"
                    oninput="document.getElementById('rateValue').textContent = this.value"
                />
                <div class="flex justify-between text-xs text-gray-500 mt-1">
                    <span>××™×˜×™ (0.5)</span>
                    <span>××”×™×¨ ×××•×“ (2.0)</span>
                </div>
            </div>

            <div>
                <label class="block text-gray-700 font-bold mb-2">
                    ğŸ”Š Effect Profile: <span id="effectValue">small-bluetooth-speaker-class-device</span>
                </label>
                <select 
                    id="effectSelect" 
                    class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none"
                    onchange="document.getElementById('effectValue').textContent = this.value"
                >
                    <option value="small-bluetooth-speaker-class-device" selected>ğŸ”Š Bluetooth Speaker (×¨×•×‘×•×˜×™ - ××•×ª×§×Ÿ ×¢×›×©×™×•) â­</option>
                    <option value="telephony-class-application">ğŸ“ Telephony (×¨×•×‘×•×˜×™ ××§×¡×™××œ×™)</option>
                    <option value="headphone-class-device">ğŸ§ Headphones (×˜×‘×¢×™ ×™×•×ª×¨)</option>
                    <option value="large-home-entertainment-class-device">ğŸ  Home Entertainment (×˜×‘×¢×™)</option>
                </select>
            </div>
        </div>

        <!-- Status -->
        <div id="status" class="text-center text-gray-600 mb-4 h-8"></div>

        <!-- Stop button -->
        <button 
            id="stopBtn"
            onclick="stopCurrentAudio()"
            class="w-full bg-red-500 text-white py-3 rounded-lg font-bold hover:bg-red-600 transition hidden"
        >
            â¹ï¸ ×¢×¦×•×¨ ×”×©××¢×”
        </button>

        <!-- Info -->
        <div class="mt-6 bg-blue-50 border-2 border-blue-200 p-4 rounded-lg">
            <p class="text-sm text-gray-700">
                ğŸ’¡ <strong>×˜×™×¤:</strong> ×œ××—×¨ ×©×‘×—×¨×ª ×§×•×œ, ×”×¢×ª×§ ××ª ×”×©× ×©×œ×• (×œ××©×œ: <code class="bg-gray-200 px-2 py-1 rounded">he-IL-Wavenet-C</code>) 
                ×•×©× ×” ××•×ª×• ×‘-<code class="bg-gray-200 px-2 py-1 rounded">marketplace.html</code>
            </p>
        </div>
    </div>

    <script>
        const API_KEY = 'AIzaSyBexR71l9bdJ28OKx8P7QhyQDQpqTPa56o';
        let currentAudio = null;
        let currentCard = null;

        async function speakWithVoice(voiceName, gender, cardElement) {
            // Stop current audio if playing
            if (currentAudio) {
                currentAudio.pause();
                if (currentCard) {
                    currentCard.classList.remove('playing');
                }
            }

            // Get settings
            const text = document.getElementById('testText').value;
            const pitch = parseFloat(document.getElementById('pitchSlider').value);
            const rate = parseFloat(document.getElementById('rateSlider').value);
            const effect = document.getElementById('effectSelect').value;

            // Update status
            const status = document.getElementById('status');
            status.textContent = 'ğŸ¤– ×§×•×¨× ×œGoogle TTS API...';
            status.className = 'text-center text-blue-600 mb-4 h-8 font-bold';

            // Mark card as playing
            cardElement.classList.add('playing');
            currentCard = cardElement;

            try {
                const response = await fetch(`https://texttospeech.googleapis.com/v1/text:synthesize?key=${API_KEY}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        input: { text: text },
                        voice: {
                            languageCode: 'he-IL',
                            name: voiceName,
                            ssmlGender: gender
                        },
                        audioConfig: {
                            audioEncoding: 'MP3',
                            pitch: pitch,
                            speakingRate: rate,
                            volumeGainDb: 0.0,
                            effectsProfileId: [effect]
                        }
                    })
                });

                const data = await response.json();
                
                if (data.error) {
                    throw new Error(data.error.message);
                }
                
                if (data.audioContent) {
                    status.textContent = `ğŸ”Š ××©××™×¢: ${voiceName}`;
                    status.className = 'text-center text-green-600 mb-4 h-8 font-bold';
                    
                    const audio = new Audio('data:audio/mp3;base64,' + data.audioContent);
                    currentAudio = audio;
                    
                    document.getElementById('stopBtn').classList.remove('hidden');
                    
                    audio.onended = () => {
                        status.textContent = 'âœ… ×¡×™×•× ×”×©××¢×”';
                        status.className = 'text-center text-gray-600 mb-4 h-8';
                        cardElement.classList.remove('playing');
                        document.getElementById('stopBtn').classList.add('hidden');
                        currentAudio = null;
                        currentCard = null;
                    };
                    
                    audio.onerror = (e) => {
                        status.textContent = 'âŒ ×©×’×™××” ×‘×”×©××¢×ª ××•×“×™×•';
                        status.className = 'text-center text-red-600 mb-4 h-8 font-bold';
                        cardElement.classList.remove('playing');
                        document.getElementById('stopBtn').classList.add('hidden');
                    };
                    
                    await audio.play();
                }
            } catch (error) {
                status.textContent = `âŒ ×©×’×™××”: ${error.message}`;
                status.className = 'text-center text-red-600 mb-4 h-8 font-bold';
                cardElement.classList.remove('playing');
                console.error('Error:', error);
            }
        }

        function stopCurrentAudio() {
            if (currentAudio) {
                currentAudio.pause();
                currentAudio = null;
            }
            if (currentCard) {
                currentCard.classList.remove('playing');
                currentCard = null;
            }
            document.getElementById('status').textContent = 'â¹ï¸ ×¢×¦×¨×ª ×”×©××¢×”';
            document.getElementById('status').className = 'text-center text-gray-600 mb-4 h-8';
            document.getElementById('stopBtn').classList.add('hidden');
        }
    </script>
</body>
</html>

