<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×‘×“×™×§×ª ×ª×‘× ×™×ª × ×•×ª× ×™ ×©×™×¨×•×ª</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            width: 100%;
            margin: 10px 0;
            transition: all 0.3s;
        }
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        .info {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #2196f3;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ§ª ×‘×“×™×§×ª ×ª×‘× ×™×ª × ×•×ª× ×™ ×©×™×¨×•×ª ×”×—×“×©×”</h1>
        
        <div class="info">
            <h3>××” ×”×©×ª× ×”:</h3>
            <ul>
                <li>âœ… ×ª×‘× ×™×ª ×¤×©×•×˜×” ×™×•×ª×¨ - ×›××• ×—× ×•×ª</li>
                <li>âœ… ×˜×•×¤×¡ ×§×‘×™×¢×ª ×ª×•×¨ ×¢× ×©×, ×˜×œ×¤×•×Ÿ ×•×¤×¨×˜×™×</li>
                <li>âœ… ×‘×œ×™ ×™×•××Ÿ ××•×¨×›×‘ - ×¨×§ ×˜×•×¤×¡ ×¤×©×•×˜</li>
                <li>âœ… ×¢×™×¦×•×‘ × ×§×™ ×•××•×“×¨× ×™</li>
                <li>âœ… ××•×ª×× ×œ× ×™×™×“</li>
            </ul>
        </div>

        <button class="test-button" onclick="testCreateServicePage()">
            ğŸ”§ ×¦×•×¨ ×“×£ × ×•×ª× ×™ ×©×™×¨×•×ª ×œ×‘×“×™×§×”
        </button>

        <button class="test-button" onclick="openPageCreator()">
            ğŸ“„ ×¤×ª×— ×™×•×¦×¨ ×“×¤×™×
        </button>

        <div id="result" style="margin-top: 20px; padding: 15px; border-radius: 8px; display: none;"></div>
    </div>

    <script>
        async function testCreateServicePage() {
            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';
            resultDiv.style.background = '#fff3cd';
            resultDiv.innerHTML = 'â³ ×™×•×¦×¨ ×“×£ ×‘×“×™×§×”...';

            try {
                const response = await fetch('/api/create-page-with-template', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        templateId: 'serviceProvider',
                        data: {
                            businessName: '××•×¡×š ×“×•×“',
                            profession: '××›×•× ××™ ××•××—×”',
                            description: '××•×¡×š ××§×¦×•×¢×™ ×¢× × ×™×¡×™×•×Ÿ ×©×œ 15 ×©× ×”. ××ª××—×™× ×‘×ª×™×§×•×Ÿ ×›×œ ×¡×•×’×™ ×”×¨×›×‘×™×, ×”×—×œ×¤×ª ×©××Ÿ, ×‘×“×™×§×•×ª ×ª×§×•×¤×ª×™×•×ª ×•×ª×™×§×•× ×™× ××•×¨×›×‘×™×.',
                            phone: '050-1234567',
                            email: 'david@garage.co.il',
                            address: '×¨×—×•×‘ ×”×¨×¦×œ 123, ×ª×œ ××‘×™×‘',
                            workingDays: ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday'],
                            workingHours: '9:00-17:00, ×”×¤×¡×§×” 13:00-14:00'
                        },
                        designStyle: 'modern'
                    })
                });

                const result = await response.json();
                
                if (result.success) {
                    resultDiv.style.background = '#d4edda';
                    resultDiv.innerHTML = `
                        âœ… ×“×£ × ×•×¦×¨ ×‘×”×¦×œ×—×”!<br>
                        <strong>×§×™×©×•×¨:</strong> <a href="/view/${result.slug}" target="_blank">/view/${result.slug}</a><br>
                        <strong>Slug:</strong> ${result.slug}
                    `;
                } else {
                    throw new Error(result.error || 'Unknown error');
                }
            } catch (error) {
                resultDiv.style.background = '#f8d7da';
                resultDiv.innerHTML = `âŒ ×©×’×™××”: ${error.message}`;
            }
        }

        function openPageCreator() {
            window.open('/page-creator', '_blank');
        }
    </script>
</body>
</html>