# 🔧 בדיקה ותיקון מהיר - דשבורד

## 🎯 הבעיות שצריך לתקן

1. **כותרת הדף לא מוצגת** - כתוב "ללא שם"
2. **כפתור "צפה" נותן 404** - הדף לא נמצא
3. **כפתור "הפעל מנוי" לא מוצג** - צריך להופיע למשתמשים רגילים
4. **סטטוס מנוי לא משתנה** - כשמפעילים מנוי צריך להשתנות ל"פעיל"

## 📋 שלב 1: בדוק מה יש ב-Console

1. פתח את הדשבורד: http://localhost:5173/dashboard?userId=YOUR_USER_ID
2. פתח Console (F12)
3. חפש את השורות:
   ```
   📊 Dashboard data: ...
   📄 First page details: ...
   ```
4. העתק את הפלט לכאן

## 🔧 שלב 2: תקן את הכותרות החסרות

אם הכותרת חסרה, הרץ את הסקריפט:

```bash
# ערוך את הקובץ check-and-fix-pages.js
# החלף את STRAPI_API_TOKEN עם הטוקן מ-.env

node check-and-fix-pages.js
```

הסקריפט יבדוק את כל הדפים ויתקן כותרות חסרות.

## 🎯 שלב 3: הפעל מנוי למשתמש

כדי להפעיל מנוי למשתמש, שלח בקשה ל-API:

```bash
# החלף YOUR_USER_ID עם ה-ID שלך
curl -X POST http://localhost:5173/api/subscription/activate-user \
  -H "Content-Type: application/json" \
  -d '{"userId": "YOUR_USER_ID", "months": 1}'
```

או השתמש ב-Postman/Thunder Client:
- Method: POST
- URL: http://localhost:5173/api/subscription/activate-user
- Body (JSON):
  ```json
  {
    "userId": "36c0bd16-5a25-45a3-8735-8b5913ccc9c9",
    "months": 1
  }
  ```

## 🔍 שלב 4: בדוק את התוצאות

1. רענן את הדשבורד (F5)
2. בדוק:
   - ✅ הכותרת מוצגת?
   - ✅ כפתור "צפה" עובד?
   - ✅ סטטוס המנוי השתנה ל"פעיל"?
   - ✅ כפתור "הפעל מנוי" נעלם והופיע "מנוי פעיל"?

## 🐛 אם עדיין יש בעיות

### בעיה: הכותרת עדיין "ללא שם"

**פתרון**: בדוק ב-Console מה הערך של `page.title`:
```javascript
console.log('📄 First page details:', {
  title: data.pages[0].title,  // <-- מה כתוב כאן?
  ...
});
```

אם זה `undefined` או `null`, הבעיה היא שהשדה לא נשמר ב-Strapi.

### בעיה: כפתור "צפה" נותן 404

**פתרון**: בדוק ב-Console מה הערך של `slug`:
```javascript
🔍 Opening page: { slug: "???", page: {...} }
```

אם ה-slug חסר, צריך ליצור אותו ב-Strapi.

### בעיה: כפתור "הפעל מנוי" לא מוצג

**פתרון**: בדוק ב-Console מה הערך של `subscriptionStatus`:
```javascript
📊 Dashboard data: {
  subscriptionStatus: "???"  // <-- צריך להיות "inactive" או "active"
}
```

## 📝 קבצים שנוצרו

1. `check-and-fix-pages.js` - סקריפט לבדיקה ותיקון דפים
2. `new-app/src/routes/api/subscription/activate-user/+server.js` - API להפעלת מנוי
3. `בדיקה-ותיקון-מהיר.md` - המדריך הזה

## 🎯 מה הלאה

אחרי שתבדוק את ה-Console ותריץ את הסקריפטים, תגיד לי מה התוצאות ונמשיך לתקן את מה שצריך.
