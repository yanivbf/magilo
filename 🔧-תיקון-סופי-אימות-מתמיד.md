#  转拽 住驻 转 转

##  转拽 注砖

### 1. 砖转转 转 `hooks.server.js` 
- **拽 砖**: 拽转 JWT -userId 住专 注驻转
- **Step A**: 拽转 cookies (`jwt` -`userId`)
- **Step B**:   tokens - `event.locals.user = null`
- **Step C**:  砖 token - fetch -Strapi `/users/me`  custom users
- **Step D**: 拽爪 -`event.locals.user` 注 转 

### 2. 转拽 专转 Cookies
- **path: '/'** -  注转 转拽注转 -`/auth`
- **secure: false** -  -localhost/dev
- **sameSite: 'lax'** - 专 
- **httpOnly: false** - 砖 -client-side

### 3. 砖驻专 Google OAuth endpoint
- 专转 cookies  注  驻专专 专砖
- 住驻转 `subscriptionStatus` cookie
-  驻专 

### 4. 住专转 驻转专 住 砖专
- 专 注专转 转 专
- Google OAuth 驻 砖

## 专转 Google OAuth 专砖转

### -Google Cloud Console:
1. **Authorized JavaScript origins**:
   - `http://localhost:5173`
   - `http://localhost:3000` ( 砖转砖)

2. **Authorized redirect URIs**:
   - `http://localhost:5173/auth/google/callback`
   - `http://localhost:5173/login`

##  爪专 拽 注砖

### 1. 拽 砖砖专转 专爪
```bash
# Terminal 1 - Strapi
cd strapi-backend
npm run develop

# Terminal 2 - SvelteKit  
cd new-app
npm run dev
```

### 2. 拽 转 祝 转专转
-  -`http://localhost:5173/login`
- 抓 注 "转专 注 Google"
- 拽 砖转 注

### 3. 拽 砖住砖 砖专
- 专 转专转,   驻
-  砖 转转拽

##  注 砖 注转

### 拽 -Console:
1. **Network tab** - 拽 砖-cookies 砖
2. **Application tab** - 拽 砖-cookies 砖专
3. **Console** - 拽 砖 砖转 JavaScript

### 拽 -Server logs:
- 注转 -`hooks.server.js`
- 注转 -Google OAuth endpoint

## 住住
 **注专转 转拽 - 拽 注砖 转 转专转 专**

转 专 注 专 注 Google OAuth 砖专 转 住砖  驻.