# ğŸ” ×ª×™×§×•×Ÿ ×©×’×™××ª ×”×–×× ×” - ×‘×“×™×§×” ××¤×•×¨×˜×ª

## ××” ×¢×©×™× ×•

×”×•×¡×¤× ×• ×œ×•×’×™× ××¤×•×¨×˜×™× ×××•×“ ×‘×›×œ ×©×œ×‘ ×©×œ ×ª×”×œ×™×š ×”×”×–×× ×” ×›×“×™ ×œ×–×”×•×ª ×‘×“×™×•×§ ××™×¤×” ×”×©×’×™××” ××ª×¨×—×©×ª.

## ××™×¤×” ×”×•×¡×¤× ×• ×œ×•×’×™×

### 1. ×‘×§×•××¤×•× × ×˜ ProductsGallerySection.svelte (×¤×•× ×§×¦×™×™×ª submitOrder)

```javascript
âœ… ×œ×•×’×™× ×©× ×•×¡×¤×•:
- ğŸ›’ submitOrder called
- ğŸ“‹ Customer info
- ğŸ›’ Cart
- ğŸ’° Cart total
- ğŸ“„ Page ID
- ğŸ‘¤ User ID from cookie
- ğŸ“¦ Order items prepared
- ğŸ“¤ Sending request body
- ğŸŒ Sending POST request
- ğŸ“¥ Response status
- ğŸ“¥ Response data
- âŒ Error details (×× ×™×© ×©×’×™××”)
```

### 2. ×‘-API Purchase (+server.js)

```javascript
âœ… ×œ×•×’×™× ×©× ×•×¡×¤×•:
- ğŸ›’ PURCHASE REQUEST (×›×œ ×”×¤×¨×˜×™×)
- ğŸ” Looking up Strapi user
- ğŸ” Looking up Strapi page
- ğŸ’¾ Creating purchase in Strapi
- ğŸ“¥ Purchase response
- âœ… Purchase created with ID
- âŒ Error details ××¤×•×¨×˜×™×
```

### 3. ×‘-strapi.js (×¤×•× ×§×¦×™×™×ª createPurchase)

```javascript
âœ… ×œ×•×’×™× ×©× ×•×¡×¤×•:
- ğŸ“¦ Creating purchase in Strapi
- ğŸ“¤ Strapi request payload
- âœ… Purchase created successfully
- âŒ Strapi purchase creation error (××¤×•×¨×˜)
```

## ××™×š ×œ×‘×“×•×§

1. **×¤×ª×— ××ª ×”×§×•× ×¡×•×œ ×‘×“×¤×“×¤×Ÿ** (F12)
2. **× ×¡×” ×œ×©×œ×•×— ×”×–×× ×”**
3. **×ª×¨××” ×‘×“×™×•×§ ××™×¤×” ×”×©×’×™××” ××ª×¨×—×©×ª**

## ××” ×ª×¨××” ×‘×§×•× ×¡×•×œ

### ×× ×”×›×œ ×¢×•×‘×“:
```
ğŸ›’ submitOrder called
ğŸ“‹ Customer info: {...}
ğŸ›’ Cart: [...]
ğŸ’° Cart total: 150
ğŸ“„ Page ID: abc123
âœ… Validation passed, preparing order...
ğŸ‘¤ User ID from cookie: google_123456
ğŸ“¦ Order items prepared: [...]
ğŸ“¤ Sending request body: {...}
ğŸŒ Sending POST request to /api/purchase...
ğŸ“¥ Response status: 200 OK
ğŸ“¥ Response data: {success: true, purchaseId: 15}
âœ… Order submitted successfully!
```

### ×× ×™×© ×©×’×™××”:
```
ğŸ›’ submitOrder called
ğŸ“‹ Customer info: {...}
...
ğŸ“¥ Response status: 400 Bad Request
ğŸ“¥ Response data: {error: "Missing userId"}
âŒ Server returned error: Missing userId
âŒ Error submitting order: Missing userId
```

## ×©×’×™××•×ª ××¤×©×¨×™×•×ª ×•×¤×ª×¨×•× ×•×ª

### 1. Missing userId
**×‘×¢×™×”:** ××™×Ÿ userId ×‘×¢×•×’×™×™×”  
**×¤×ª×¨×•×Ÿ:** ×”×ª×—×‘×¨ ××—×“×© ××• ×‘×“×•×§ ×©×”×¢×•×’×™×™×” ×§×™×™××ª

### 2. Missing pageId
**×‘×¢×™×”:** pageId ×œ× ××•×¢×‘×¨ × ×›×•×Ÿ  
**×¤×ª×¨×•×Ÿ:** ×‘×“×•×§ ×©×”×§×•××¤×•× × ×˜ ××§×‘×œ ××ª pageId ××”-context

### 3. Invalid total amount
**×‘×¢×™×”:** ×”×¡×›×•× ×”×›×•×œ×œ ×œ× ×ª×§×™×Ÿ  
**×¤×ª×¨×•×Ÿ:** ×‘×“×•×§ ×©×”××•×¦×¨×™× ×‘××—×™×¨×™× ×ª×§×™× ×™×

### 4. Failed to create purchase in Strapi
**×‘×¢×™×”:** ×©×’×™××” ×‘×©×¨×ª Strapi  
**×¤×ª×¨×•×Ÿ:** ×‘×“×•×§ ××ª ×”×œ×•×’×™× ×‘×˜×¨××™× ×œ ×©×œ Strapi

## ×‘×“×™×§×” ××”×™×¨×”

×× ××ª×” ×¨×•××” ××ª ×›×œ ×”×œ×•×’×™× ×¢×“ "ğŸŒ Sending POST request" ××‘×œ ××—×¨ ×›×š ×©×’×™××” - ×”×‘×¢×™×” ×”×™× ×‘×©×¨×ª.

×× ××ª×” ×œ× ×¨×•××” ××ª ×”×œ×•×’×™× ×‘×›×œ×œ - ×”×‘×¢×™×” ×”×™× ×©×”×¤×•× ×§×¦×™×” ×œ× × ×§×¨××ª.

## ×”×‘×

×œ××—×¨ ×©×ª× ×¡×” ×œ×©×œ×•×— ×”×–×× ×”, ×”×¢×ª×§ ××ª ×›×œ ×”×œ×•×’×™× ××”×§×•× ×¡×•×œ ×•×ª×¨××” ×œ×™ ××•×ª×.
×× ×™ ××•×›×œ ×œ×–×”×•×ª ×‘×“×™×•×§ ××” ×”×‘×¢×™×” ×•×œ×ª×§×Ÿ ××•×ª×”.
